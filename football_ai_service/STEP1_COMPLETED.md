# ‚úÖ STEP 1 –ó–ê–í–™–†–®–ï–ù –£–°–ü–ï–®–ù–û

## üìã –†–µ–∑—é–º–µ

**STEP 1: –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –ø—Ä–æ–µ–∫—Ç–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ ESPN Data Loader** –µ –∑–∞–≤—ä—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!

## üèóÔ∏è –°—ä–∑–¥–∞–¥–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
football_ai_service/
‚îú‚îÄ‚îÄ README.md                    ‚úì –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ requirements.txt             ‚úì Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ .gitignore                   ‚úì Git –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ registry.json                ‚úì –†–µ–≥–∏—Å—Ç—ä—Ä –Ω–∞ –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ test_data_loader.py          ‚úì –¢–µ—Å—Ç–æ–≤ —Å–∫—Ä–∏–ø—Ç
‚îÇ
‚îú‚îÄ‚îÄ core/                        ‚úì –û—Å–Ω–æ–≤–Ω–∏ –º–æ–¥—É–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ utils.py                 ‚úì –ü–æ–º–æ—â–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ data_loader.py           ‚úì ESPN Data Loader (–ì–õ–ê–í–ï–ù –ú–û–î–£–õ)
‚îÇ
‚îú‚îÄ‚îÄ config/                      ‚úì –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ data_config.yaml         ‚úì –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ –¥–∞–Ω–Ω–∏
‚îÇ   ‚îî‚îÄ‚îÄ model_config.yaml        ‚úì –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –Ω–∞ –º–æ–¥–µ–ª–∏
‚îÇ
‚îú‚îÄ‚îÄ pipelines/                   ‚úì Pipeline —Å–∫—Ä–∏–ø—Ç–æ–≤–µ
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îî‚îÄ‚îÄ prepare_data.py          ‚úì Data preparation pipeline
‚îÇ
‚îú‚îÄ‚îÄ data/                        ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∑–∞ –¥–∞–Ω–Ω–∏
‚îÇ   ‚îú‚îÄ‚îÄ raw/
‚îÇ   ‚îî‚îÄ‚îÄ processed/
‚îÇ
‚îú‚îÄ‚îÄ models/                      ‚úì –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∑–∞ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îú‚îÄ‚îÄ model_1x2_v1/
‚îÇ   ‚îú‚îÄ‚îÄ model_ou25_v1/
‚îÇ   ‚îú‚îÄ‚îÄ model_btts_v1/
‚îÇ   ‚îú‚îÄ‚îÄ model_corners_v1/
‚îÇ   ‚îú‚îÄ‚îÄ model_poisson_v1/
‚îÇ   ‚îî‚îÄ‚îÄ ensemble_v1/
‚îÇ
‚îú‚îÄ‚îÄ api/                         ‚úì API –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
‚îî‚îÄ‚îÄ logs/                        ‚úì Logs –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è
```

## üéØ –†–µ–∞–ª–∏–∑–∏—Ä–∞–Ω–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–Ω–æ—Å—Ç–∏

### 1. ESPN Data Loader (`core/data_loader.py`)

–ü—ä–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω loader —Å –º–µ—Ç–æ–¥–∏ –∑–∞:

- ‚úÖ **`load_fixtures()`** - –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ 66,620 –º–∞—á–∞
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç (1X2)
  - Over/Under 2.5 –≥–æ–ª–æ–≤–µ
  - Both Teams To Score (BTTS)
  - –û–±—â–æ –≥–æ–ª–æ–≤–µ –∏ —Ä–∞–∑–ª–∏–∫–∞

- ‚úÖ **`load_teams()`** - –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ 4,106 –æ—Ç–±–æ—Ä–∞

- ‚úÖ **`load_team_stats()`** - –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ 98,661 —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  - –í–ª–∞–¥–µ–µ–Ω–µ –Ω–∞ —Ç–æ–ø–∫–∞—Ç–∞
  - –£–¥–∞—Ä–∏ (–æ–±—â–æ –∏ –≤ —Ä–∞–º–∫–∞—Ç–∞)
  - –™–≥–ª–æ–≤–∏
  - –ü–∞—Å–∏ (—Ç–æ—á–Ω–æ—Å—Ç)
  - –¢–∞–∫–ª–∏ –∏ –ø—Ä–∏—Ö–≤–∞—â–∞–Ω–∏—è
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∏—Å–ª–µ–Ω–∏ –º–µ—Ç—Ä–∏–∫–∏ (shot_accuracy, tackle_success, etc.)

- ‚úÖ **`load_players()`** - –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ 63,895 –∏–≥—Ä–∞—á–∏

- ‚úÖ **`load_leagues()`** - –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ 1,078 –ª–∏–≥–∏/—Å–µ–∑–æ–Ω–∏ (220 —É–Ω–∏–∫–∞–ª–Ω–∏ –ª–∏–≥–∏)

- ‚úÖ **`load_standings()`** - –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ 6,025 –∫–ª–∞—Å–∏—Ä–∞–Ω–∏—è

- ‚úÖ **`load_venues()`** - –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ 2,929 —Å—Ç–∞–¥–∏–æ–Ω–∞

- ‚úÖ **`load_team_roster()`** - –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ —Å—ä—Å—Ç–∞–≤–∏

- ‚úÖ **`load_key_events()`** - –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∫–ª—é—á–æ–≤–∏ —Å—ä–±–∏—Ç–∏—è (–≥–æ–ª–æ–≤–µ, –∫–∞—Ä—Ç–æ–Ω–∏)

- ‚úÖ **`merge_fixtures_with_stats()`** - –û–±–µ–¥–∏–Ω—è–≤–∞–Ω–µ –Ω–∞ –º–∞—á–æ–≤–µ —Å—ä—Å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (50,291 –º–∞—á–∞)

- ‚úÖ **`get_team_match_history()`** - –ò—Å—Ç–æ—Ä–∏—è –Ω–∞ –º–∞—á–æ–≤–µ –∑–∞ –æ—Ç–±–æ—Ä

- ‚úÖ **–ö–µ—à–∏—Ä–∞–Ω–µ** - –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–µ—à–∏—Ä–∞–Ω–µ –Ω–∞ –∑–∞—Ä–µ–¥–µ–Ω–∏ –¥–∞–Ω–Ω–∏ –∑–∞ –±—ä—Ä–∑–∏–Ω–∞

### 2. Utilities (`core/utils.py`)

- ‚úÖ Logging —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ YAML/JSON loader/saver
- ‚úÖ Sigmoid —Ñ—É–Ω–∫—Ü–∏—è
- ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (minmax, zscore)
- ‚úÖ Rolling averages
- ‚úÖ Safe division
- ‚úÖ Performance timer

### 3. Pipelines (`pipelines/prepare_data.py`)

- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ base dataset
- ‚úÖ Train/Validation/Test split (—Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–Ω–æ)
- ‚úÖ –ó–∞–ø–∞–∑–≤–∞–Ω–µ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–µ–Ω–∏ –¥–∞–Ω–Ω–∏ (Parquet —Ñ–æ—Ä–º–∞—Ç)
- ‚úÖ –ì–µ–Ω–µ—Ä–∏—Ä–∞–Ω–µ –Ω–∞ data summary

### 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

- ‚úÖ **data_config.yaml** - –ü—ä—Ç–∏—â–∞, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞ features, split dates
- ‚úÖ **model_config.yaml** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∑–∞ –≤—Å–∏—á–∫–∏ –º–æ–¥–µ–ª–∏ (Poisson, 1X2, OU2.5, BTTS, Corners, Ensemble, FII)

## üìä –¢–µ—Å—Ç–æ–≤–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏

```
‚úì –ó–∞—Ä–µ–¥–µ–Ω–∏ 66,620 –º–∞—á–∞
‚úì –ü–µ—Ä–∏–æ–¥: 2024-01-01 –¥–æ 2026-10-06
‚úì –†–µ–∑—É–ª—Ç–∞—Ç–∏ - 1: 25,235 | X: 24,419 | 2: 16,966
‚úì 4,106 –æ—Ç–±–æ—Ä–∞
‚úì 220 —É–Ω–∏–∫–∞–ª–Ω–∏ –ª–∏–≥–∏
‚úì 63,895 –∏–≥—Ä–∞—á–∏ (—Å—Ä–µ–¥–Ω–∞ –≤—ä–∑—Ä–∞—Å—Ç: 24.4 –≥–æ–¥–∏–Ω–∏)
‚úì –°—Ä–µ–¥–Ω–æ –≤–ª–∞–¥–µ–µ–Ω–µ: 27.3%
‚úì –°—Ä–µ–¥–Ω–∏ —É–¥–∞—Ä–∏: 6.8
‚úì –°—Ä–µ–¥–Ω–∏ —ä–≥–ª–æ–≤–∏: 2.6
‚úì 50,291 –º–∞—á–∞ —Å –ø—ä–ª–Ω–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ –¥–µ—Ç–∞–π–ª–∏

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –¥–∞–Ω–Ω–∏:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ –¥–∞—Ç–∏
- –ü—Ä–µ–∏–º–µ–Ω—É–≤–∞–Ω–µ –Ω–∞ –∫–æ–ª–æ–Ω–∏ –∑–∞ —è—Å–Ω–æ—Ç–∞
- –ò–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ –¥–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∏ –º–µ—Ç—Ä–∏–∫–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –ª–∏–ø—Å–≤–∞—â–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏
- –ü—Ä–µ–º–∞—Ö–≤–∞–Ω–µ –Ω–∞ –¥—É–±–ª–∏—Ä–∞–Ω–∏ –∑–∞–ø–∏—Å–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –ö–µ—à–∏—Ä–∞–Ω–µ –Ω–∞ –∑–∞—Ä–µ–¥–µ–Ω–∏ –¥–∞–Ω–Ω–∏
- Lazy loading
- Parquet —Ñ–æ—Ä–º–∞—Ç –∑–∞ –±—ä—Ä–∑–æ —á–µ—Ç–µ–Ω–µ/–ø–∏—Å–∞–Ω–µ
- Logging –Ω–∞ –≤—Å–∏—á–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏

### –ö–∞—á–µ—Å—Ç–≤–æ –Ω–∞ –∫–æ–¥–∞:
- PEP8 compliant
- Type hints
- –ü–æ–¥—Ä–æ–±–Ω–∏ docstrings
- Error handling
- –ú–æ–¥—É–ª–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

## üìù –°–ª–µ–¥–≤–∞—â–∏ —Å—Ç—ä–ø–∫–∏ (STEP 2)

–°–ª–µ–¥ —É—Å–ø–µ—à–Ω–æ—Ç–æ –∑–∞–≤—ä—Ä—à–≤–∞–Ω–µ –Ω–∞ STEP 1, –≥–æ—Ç–æ–≤–∏ —Å–º–µ –∑–∞:

**STEP 2: Feature Engineering Pipeline**
- Elo rating —Å–∏—Å—Ç–µ–º–∞
- Rolling averages (5, 10 –º–∞—á–∞)
- Team form index
- xG proxy –º–µ—Ç—Ä–∏–∫–∏
- Attacking/Defensive efficiency
- Home advantage
- Motivation score
- Momentum trends

## üöÄ –ö–∞–∫ –¥–∞ —Å—Ç–∞—Ä—Ç–∏—Ä–∞—Ç–µ

```bash
# –¢–µ—Å—Ç–≤–∞–Ω–µ –Ω–∞ data loader
cd football_ai_service
python3 test_data_loader.py

# –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –Ω–∞ –¥–∞–Ω–Ω–∏ (–∫–æ–≥–∞—Ç–æ –µ –≥–æ—Ç–æ–≤–æ)
python3 pipelines/prepare_data.py
```

## ‚ú® –ö–ª—é—á–æ–≤–∏ –ø–æ—Å—Ç–∏–∂–µ–Ω–∏—è

1. ‚úÖ –ü—ä–ª–Ω–∞ –ø—Ä–æ–µ–∫—Ç–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å—ä–∑–¥–∞–¥–µ–Ω–∞
2. ‚úÖ –ú–æ–¥—É–ª–µ–Ω –∏ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä—É–µ–º –¥–∏–∑–∞–π–Ω
3. ‚úÖ ESPN Data Loader –Ω–∞–ø—ä–ª–Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
4. ‚úÖ –í—Å–∏—á–∫–∏ –æ—Å–Ω–æ–≤–Ω–∏ –¥–∞–Ω–Ω–∏ —Å–µ –∑–∞—Ä–µ–∂–¥–∞—Ç –∫–æ—Ä–µ–∫—Ç–Ω–æ
5. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∏–∑—á–∏—Å–ª—è–≤–∞–Ω–µ –Ω–∞ target variables (1X2, OU2.5, BTTS)
6. ‚úÖ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç –∑–∞ feature engineering
7. ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–∏ —Ñ–∞–π–ª–æ–≤–µ –∑–∞ –≤—Å–∏—á–∫–∏ –º–æ–¥–µ–ª–∏
8. ‚úÖ Logging –∏ error handling
9. ‚úÖ –¢–µ—Å—Ç–≤–∞–Ω –∏ –≤–∞–ª–∏–¥–∏—Ä–∞–Ω –∫–æ–¥

---

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–™–†–®–ï–ù  
**–í—Ä–µ–º–µ –∑–∞ –∏–∑–ø—ä–ª–Ω–µ–Ω–∏–µ:** ~0.5 —Å–µ–∫—É–Ω–¥–∏ –∑–∞ –∑–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –≤—Å–∏—á–∫–∏ –¥–∞–Ω–Ω–∏  
**–°–ª–µ–¥–≤–∞—â–∞ —Å—Ç—ä–ø–∫–∞:** STEP 2 - Feature Engineering Pipeline
